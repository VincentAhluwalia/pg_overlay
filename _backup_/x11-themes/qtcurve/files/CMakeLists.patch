--- CMakeLists.txt	2016-02-22 00:42:51.038991902 +0700
+++ CMakeLists.txt_new	2016-02-22 00:43:00.000000000 +0700
@@ -39,8 +39,8 @@
 endfunction()
 qtc_option(ENABLE_QT4 "Building Qt4 theme." On)
 qtc_option(ENABLE_QT5 "Building Qt5 theme." On)
-qtc_option(ENABLE_GTK2 "Building Gtk2 theme." On)
-# option(ENABLE_GTK3 "Building Gtk3 theme." On)
+qtc_option(ENABLE_GTK3 "Building Gtk2 theme." On)
+option(ENABLE_GTK3 "Building Gtk3 theme." On)
 option(ENABLE_TEST "Enable testing." On)
 option(QTC_ENABLE_X11 "Enable X11" On)
 option(QTC_INSTALL_PO "Install translation files." On)
@@ -149,35 +149,35 @@
   include_directories(SYSTEM "${CMAKE_CURRENT_SOURCE_DIR}/lib/xcb-defs")
 endif()
 
-if(ENABLE_GTK2 AND NOT ENABLE_GTK2_DEFINED)
+if(ENABLE_GTK3 AND NOT ENABLE_GTK3_DEFINED)
   find_package(PkgConfig)
   if(NOT PKG_CONFIG_FOUND)
     message(WARNING "pkg-config not found, disable Gtk2 build.")
-    set(ENABLE_GTK2 Off)
+    set(ENABLE_GTK3 Off)
   else()
-    unset(__pkg_config_checked_GTK2 CACHE)
-    pkg_check_modules(GTK2 gtk+-2.0)
-    if(NOT GTK2_FOUND)
+    unset(__pkg_config_checked_GTK3 CACHE)
+    pkg_check_modules(GTK3 gtk+-3.0)
+    if(NOT GTK3_FOUND)
       message(WARNING "gtk+-2.0 not found, disable Gtk2 build.")
-      set(ENABLE_GTK2 Off)
+      set(ENABLE_GTK3 Off)
     endif()
   endif()
 endif()
 
-if(ENABLE_GTK2)
+if(ENABLE_GTK3)
   find_package(PkgConfig REQUIRED)
-  unset(__pkg_config_checked_GTK2 CACHE)
-  pkg_check_modules(GTK2 REQUIRED gtk+-2.0)
-  if(GTK2_THEME_PREFIX)
-    set(GTK2_PREFIX "${GTK2_THEME_PREFIX}")
-  elseif(NOT GTK2_PREFIX)
-    set(GTK2_PREFIX "${CMAKE_INSTALL_PREFIX}")
+  unset(__pkg_config_checked_GTK3 CACHE)
+  pkg_check_modules(GTK3 REQUIRED gtk+-3.0)
+  if(GTK3_THEME_PREFIX)
+    set(GTK3_PREFIX "${GTK3_THEME_PREFIX}")
+  elseif(NOT GTK3_PREFIX)
+    set(GTK3_PREFIX "${CMAKE_INSTALL_PREFIX}")
   endif()
-  if(NOT GTK2_LIBDIR)
-    set(GTK2_LIBDIR "${GTK2_PREFIX}/lib")
+  if(NOT GTK3_LIBDIR)
+    set(GTK3_LIBDIR "${GTK3_PREFIX}/lib")
   endif()
-  _pkgconfig_invoke(gtk+-2.0 GTK2 BIN_VERSION "" --variable=gtk_binary_version)
-  set(GTK2_THEME_DIR ${GTK2_PREFIX}/share/themes/QtCurve)
+  _pkgconfig_invoke(gtk+-3.0 GTK3 BIN_VERSION "" --variable=gtk_binary_version)
+  set(GTK3_THEME_DIR ${GTK3_PREFIX}/share/themes/QtCurve)
 endif()
 
 configure_file(config.h.in config.h @ONLY)
@@ -215,7 +215,7 @@
 add_subdirectory(lib)
 add_subdirectory(qt4)
 add_subdirectory(qt5)
-add_subdirectory(gtk2)
+add_subdirectory(gtk3)
 add_subdirectory(tools)
 if(ENABLE_TEST)
   enable_testing()

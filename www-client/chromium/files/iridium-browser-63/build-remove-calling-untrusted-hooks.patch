From ce2f4d7f445af3891e2a8fc6d1e0058fe15b9494 Mon Sep 17 00:00:00 2001
From: Jan Engelhardt <jengelh@inai.de>
Date: Thu, 20 Apr 2017 16:25:49 +0200
Subject: [PATCH 01/64] build: remove calling untrusted hooks

Avoid downloading untrusted executables and wasting time with a
sysroot.
---
 DEPS | 406 -------------------------------------------------------------------
 1 file changed, 406 deletions(-)

diff --git a/DEPS b/DEPS
index 5fe3e36633f6..b404d70c090d 100644
--- a/DEPS
+++ b/DEPS
@@ -362,73 +362,6 @@ hooks = [
     'name':
       'remove_stale_pyc_files'
   },
-  {
-    'action': [
-      'python',
-      'src/build/download_nacl_toolchains.py',
-      '--mode',
-      'nacl_core_sdk',
-      'sync',
-      '--extract'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'nacltools'
-  },
-  {
-    'action': [
-      'python',
-      'src/build/linux/sysroot_scripts/install-sysroot.py',
-      '--running-as-hook'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'sysroot'
-  },
-  {
-    'action': [
-      'python',
-      'src/build/vs_toolchain.py',
-      'update'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'win_toolchain'
-  },
-  {
-    'action': [
-      'python',
-      'src/build/mac_toolchain.py'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'mac_toolchain'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/binutils/download.py'
-    ],
-    'pattern':
-      'src/third_party/binutils',
-    'name':
-      'binutils'
-  },
-  {
-    'action': [
-      'python',
-      'src/tools/clang/scripts/update.py',
-      '--if-needed'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'clang'
-  },
   {
     'action': [
       'python',
@@ -457,316 +390,6 @@ hooks = [
     'name':
       'lastchange_skia'
   },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=win32',
-      '--no_auth',
-      '--bucket',
-      'chromium-gn',
-      '-s',
-      'src/buildtools/win/gn.exe.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'gn_win'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=darwin',
-      '--no_auth',
-      '--bucket',
-      'chromium-gn',
-      '-s',
-      'src/buildtools/mac/gn.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'gn_mac'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=linux*',
-      '--no_auth',
-      '--bucket',
-      'chromium-gn',
-      '-s',
-      'src/buildtools/linux64/gn.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'gn_linux64'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=win32',
-      '--no_auth',
-      '--bucket',
-      'chromium-clang-format',
-      '-s',
-      'src/buildtools/win/clang-format.exe.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'clang_format_win'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=darwin',
-      '--no_auth',
-      '--bucket',
-      'chromium-clang-format',
-      '-s',
-      'src/buildtools/mac/clang-format.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'clang_format_mac'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=linux*',
-      '--no_auth',
-      '--bucket',
-      'chromium-clang-format',
-      '-s',
-      'src/buildtools/linux64/clang-format.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'clang_format_linux'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=win32',
-      '--no_auth',
-      '--bucket',
-      'chromium-browser-clang/orderfiles',
-      '-d',
-      'src/chrome/build'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'orderfiles_win'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=win32',
-      '--no_auth',
-      '--bucket',
-      'chromium-luci',
-      '-d',
-      'src/tools/luci-go/win64'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'luci-go_win'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=darwin',
-      '--no_auth',
-      '--bucket',
-      'chromium-luci',
-      '-d',
-      'src/tools/luci-go/mac64'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'luci-go_mac'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=linux*',
-      '--no_auth',
-      '--bucket',
-      'chromium-luci',
-      '-d',
-      'src/tools/luci-go/linux64'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'luci-go_linux'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=win32',
-      '--no_auth',
-      '--bucket',
-      'chromium-drmemory',
-      '-s',
-      'src/third_party/drmemory/drmemory-windows-sfx.exe.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'drmemory'
-  },
-  {
-    'action': [
-      'python',
-      'src/build/get_syzygy_binaries.py',
-      '--output-dir=src/third_party/syzygy/binaries',
-      '--revision=190dbfe74c6f5b5913820fa66d9176877924d7c5',
-      '--overwrite',
-      '--copy-dia-binaries'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'syzygy-binaries'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=win32',
-      '--directory',
-      '--recursive',
-      '--no_auth',
-      '--num_threads=16',
-      '--bucket',
-      'chromium-apache-win32',
-      'src/third_party/apache-win32'
-    ],
-    'pattern':
-      '\\.sha1',
-    'name':
-      'apache_win32'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/instrumented_libraries/scripts/download_binaries.py'
-    ],
-    'pattern':
-      '\\.sha1',
-    'name':
-      'instrumented_libraries'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--no_auth',
-      '-u',
-      '--bucket',
-      'v8-wasm-fuzzer',
-      '-s',
-      'src/v8/test/fuzzer/wasm_corpus.tar.gz.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'wasm_fuzzer'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/WebKit/Source/devtools/scripts/local_node/node.py',
-      '--running-as-hook',
-      '--version'
-    ],
-    'name':
-      'devtools_install_node'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=linux*',
-      '--extract',
-      '--no_auth',
-      '--bucket',
-      'chromium-nodejs/6.9.4',
-      '-s',
-      'src/third_party/node/linux/node-linux-x64.tar.gz.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'node_linux64'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=darwin',
-      '--extract',
-      '--no_auth',
-      '--bucket',
-      'chromium-nodejs/6.9.4',
-      '-s',
-      'src/third_party/node/mac/node-darwin-x64.tar.gz.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'node_mac'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--platform=win32',
-      '--no_auth',
-      '--bucket',
-      'chromium-nodejs/6.9.4',
-      '-s',
-      'src/third_party/node/win/node.exe.sha1'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'node_win'
-  },
   {
     'action': [
       'python',
@@ -784,35 +407,6 @@ hooks = [
     'name':
       'webui_node_modules'
   },
-  {
-    'action': [
-      'python',
-      'src/tools/perf/conditionally_execute',
-      '--gyp-condition',
-      'fetch_telemetry_dependencies=1',
-      'src/third_party/catapult/telemetry/bin/fetch_telemetry_binary_dependencies'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'fetch_telemetry_binary_dependencies'
-  },
-  {
-    'action': [
-      'python',
-      'src/third_party/depot_tools/download_from_google_storage.py',
-      '--no_resume',
-      '--no_auth',
-      '--bucket',
-      'chromium-binary-patching',
-      '-d',
-      'src/chrome/installer/zucchini/testdata'
-    ],
-    'pattern':
-      '.',
-    'name':
-      'zucchini_testdata'
-  },
   {
     'action': [
       'python',
-- 
2.15.0


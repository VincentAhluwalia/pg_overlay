From be458c89f44321443ffcaf0ccd523036380dbf9e Mon Sep 17 00:00:00 2001
From: Jan Engelhardt <jengelh@inai.de>
Date: Mon, 24 Apr 2017 11:53:30 +0200
Subject: [PATCH 45/60] Make default welcome page be blank

Because replacing kChromeUIWelcomeURL with about:blank leads the
browser to load some broken URL instead.
---
 chrome/browser/resources/welcome/welcome.html | 231 ------------
 .../resources/welcome/welcome_win10.html      | 356 ------------------
 2 files changed, 587 deletions(-)

diff --git a/chrome/browser/resources/welcome/welcome.html b/chrome/browser/resources/welcome/welcome.html
index 21edb2619aa7..e69de29bb2d1 100644
--- a/chrome/browser/resources/welcome/welcome.html
+++ b/chrome/browser/resources/welcome/welcome.html
@@ -1,231 +0,0 @@
-<!doctype html>
-<html>
-<head>
-  <meta charset="utf-8">
-  <title>$i18n{headerText}</title>
-
-  <link rel="import" href="chrome://resources/html/polymer.html">
-
-  <link rel="import" href="chrome://resources/cr_elements/paper_button_style_css.html">
-  <link rel="import" href="chrome://resources/html/cr.html">
-  <link rel="import" href="chrome://resources/html/util.html">
-  <link rel="import" href="chrome://resources/polymer/v1_0/paper-button/paper-button.html">
-  <link rel="import" href="chrome://resources/polymer/v1_0/paper-styles/color.html">
-
-  <link rel="stylesheet" href="chrome://resources/css/text_defaults_md.css">
-  <link rel="stylesheet" href="chrome://welcome/welcome.css">
-
-  <dom-module id="welcome-app">
-    <template>
-      <style include="paper-button-style">
-        @keyframes slideUpContent {
-          from {
-            transform: translateY(186px);
-          }
-        }
-
-        @keyframes fadeIn {
-          from {
-            opacity: 0;
-          }
-        }
-
-        @keyframes fadeOut {
-          to {
-            opacity: 0;
-          }
-        }
-
-
-        @keyframes fadeInAndSlideUp {
-          from {
-            opacity: 0;
-            transform: translateY(8px);
-          }
-        }
-
-        @keyframes spin {
-          from {
-            transform: rotate(1440deg) scale(0.8);
-          }
-        }
-
-        @keyframes fadeInAndSlideDownShadow {
-          from {
-            opacity: .6;
-            top: 0;
-          }
-        }
-
-        @keyframes scaleUp {
-          0% {
-            transform: scale(.8);
-          }
-        }
-
-        @keyframes colorize {
-          from {
-            filter: grayscale(100%) brightness(128%) contrast(20%) brightness(161%);
-            opacity: .6;
-          }
-        }
-
-        @keyframes bounce {
-          0% {
-            transform: matrix3d(0.8, 0, 0, 0, 0, 0.8, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          7.61% {
-            transform: matrix3d(0.907, 0, 0, 0, 0, 0.907, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          11.41% {
-            transform: matrix3d(0.948, 0, 0, 0, 0, 0.948, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          15.12% {
-            transform: matrix3d(0.976, 0, 0, 0, 0, 0.976, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          18.92% {
-            transform: matrix3d(0.996, 0, 0, 0, 0, 0.996, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          22.72% {
-            transform: matrix3d(1.008, 0, 0, 0, 0, 1.008, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          30.23% {
-            transform: matrix3d(1.014, 0, 0, 0, 0, 1.014, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          50.25% {
-            transform: matrix3d(1.003, 0, 0, 0, 0, 1.003, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          70.27% {
-            transform: matrix3d(0.999, 0, 0, 0, 0, 0.999, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-          100% {
-            transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
-          }
-        }
-
-        .content {
-          height: 100%;
-          overflow-y: hidden;
-        }
-
-        .slider {
-          align-items: center;
-          animation: slideUpContent 600ms 1.8s cubic-bezier(.4, .2, 0, 1) both;
-          display: flex;
-          flex: 1;
-          flex-direction: column;
-          justify-content: center;
-          max-width: 500px;
-        }
-
-        .heading {
-          animation: fadeInAndSlideUp 600ms 1.9s cubic-bezier(.4, .2, 0, 1) both;
-          font-size: 2.125em;
-          margin-bottom: .25em;
-          margin-top: 1.5em;
-          text-align: center;
-        }
-
-        .subheading {
-          animation: fadeInAndSlideUp 600ms 1.9s cubic-bezier(.4, .2, 0, 1) both;
-          color: #939393;
-          font-size: 1em;
-          font-weight: 500;
-          margin-top: .25em;
-          text-align: center;
-        }
-
-        .logo {
-          animation: fadeIn 600ms both, bounce 1s 600ms linear both;
-          height: 96px;
-          position: relative;
-          width: 96px;
-        }
-
-        .logo-icon {
-          animation: spin 2.4s cubic-bezier(.4, .2, 0, 1) both,
-                     colorize 300ms 700ms linear both;
-          background-image: -webkit-image-set(url(chrome://welcome/logo.png) 1x,
-                                              url(chrome://welcome/logo2x.png) 2x);
-          background-size: 100%;
-          height: 96px;
-          width: 96px;
-        }
-
-        .logo-shadow {
-          animation: fadeInAndSlideDownShadow 300ms 600ms both;
-          background: rgba(0, 0, 0, .2);
-          border-radius: 50%;
-          filter: blur(16px);
-          height: 96px;
-          position: absolute;
-          top: 16px;
-          width: 96px;
-          z-index: -1;
-        }
-
-        .signin {
-          animation: fadeInAndSlideUp 600ms 2s cubic-bezier(.4, .2, 0, 1) both;
-          margin-top: 3em;
-          text-align: left;
-        }
-
-        .signin-description {
-          font-size: .875em;
-          line-height: 1.725em;
-          max-width: 344px;
-        }
-
-        .signin-buttons {
-          align-items: center;
-          display: flex;
-          flex-direction: column;
-          margin: auto;
-          margin-top: 2em;
-          width: fit-content;
-        }
-
-        paper-button {
-          font-size: .8125em;
-          /* Makes sure the two paper-buttons are the same width since they're
-             placed vertically. Requires parent to be "width: fit-content;". */
-          width: 100%;
-        }
-
-        #cancel {
-          margin-bottom: 2px;  /* Prevent focus ring from being chopped. */
-          margin-top: 1.5em;
-        }
-      </style>
-      <div class="content">
-        <div class="slider">
-          <div class="logo">
-            <div class="logo-icon" on-click="onLogoTap_"></div>
-            <div class="logo-shadow"></div>
-          </div>
-          <div class="heading">$i18n{headerText}</div>
-    <if expr="_google_chrome">
-          <div class="subheading">$i18n{subheaderText}</div>
-    </if>
-          <div class="signin">
-            <div class="signin-description">$i18n{descriptionText}</div>
-            <div class="signin-buttons">
-              <paper-button class="action-button" on-tap="onAccept_">
-                $i18n{acceptText}
-              </paper-button>
-              <paper-button id="cancel" on-tap="onDecline_">
-                $i18n{declineText}
-              </paper-button>
-            </div>
-          </div>
-        </div>
-      </div>
-    </template>
-    <script src="welcome.js"></script>
-  </dom-module>
-</head>
-<body>
-  <welcome-app></welcome-app>
-  <div class="watermark"></div>
-</body>
-</html>
diff --git a/chrome/browser/resources/welcome/welcome_win10.html b/chrome/browser/resources/welcome/welcome_win10.html
index f021f1ac326e..e69de29bb2d1 100644
--- a/chrome/browser/resources/welcome/welcome_win10.html
+++ b/chrome/browser/resources/welcome/welcome_win10.html
@@ -1,356 +0,0 @@
-<!DOCTYPE html>
-<html>
-<head>
-  <meta charset="utf-8">
-  <title>$i18n{headerText}</title>
-
-  <link rel="import" href="chrome://resources/html/polymer.html">
-
-  <link rel="import" href="chrome://resources/cr_elements/paper_button_style_css.html">
-  <link rel="import" href="chrome://resources/cr_elements/icons.html">
-  <link rel="import" href="chrome://resources/html/cr.html">
-  <link rel="import" href="chrome://resources/html/load_time_data.html">
-  <link rel="import" href="chrome://resources/html/util.html">
-
-  <link rel="import" href="chrome://resources/html/action_link.html">
-  <link rel="import" href="chrome://resources/html/action_link_css.html">
-
-  <link rel="import" href="chrome://resources/polymer/v1_0/iron-icon/iron-icon.html">
-  <link rel="import" href="chrome://resources/polymer/v1_0/paper-button/paper-button.html">
-  <link rel="import" href="chrome://resources/polymer/v1_0/paper-styles/color.html">
-
-  <link rel="stylesheet" href="chrome://resources/css/text_defaults_md.css">
-  <link rel="stylesheet" href="/welcome_win10.css">
-
-  <script src="strings.js"></script>
-
-  <dom-module id="welcome-win10">
-    <template>
-      <style include="action-link paper-button-style">
-        :host {
-          align-items: flex-start;
-          display: inline-flex;
-          flex-direction: column;
-          opacity: 0;
-          padding: 4em 1.5em 1.5em 1.5em;
-          transition: opacity 300ms;
-        }
-
-        :host .section {
-          --expandable-section-height: 28.375em;
-        }
-
-        :host([is-accelerated]) .section {
-          --expandable-section-height: 26.375em;
-        }
-
-        a {
-          color: var(--google-blue-500);
-          text-decoration: none;
-        }
-
-        ol {
-          margin: 0;
-          overflow: auto;
-          padding: 0;
-        }
-
-        strong {
-          font-weight: 500;
-        }
-
-        .header-logo {
-          content: url(chrome://welcome-win10/logo-large.png);
-          height: 3.125em;
-          margin: 0 -0.0625em;
-        }
-
-        h1 {
-          font-size: 2.125em;
-          font-weight: normal;
-          margin: 0;
-          padding-bottom: 2rem;
-          padding-top: 1rem;
-        }
-
-        .sections {
-          margin-bottom: 2em;
-        }
-
-        .section.expandable:first-child {
-          border-top: 1px solid var(--google-grey-300);
-        }
-
-        .section.expandable {
-          border-bottom: 1px solid var(--google-grey-300);
-        }
-
-        .section.expandable .section-heading {
-          color: var(--google-blue-500);
-          cursor: pointer;
-        }
-
-        .section-heading {
-          align-items: center;
-          display: flex;
-          padding: 1.5em 0;
-        }
-
-        .section-heading-text {
-          flex: 1;
-          font-weight: 500;
-        }
-
-        .section.expandable .section-heading-text {
-          font-weight: normal;
-        }
-
-        .section.expandable.expanded .section-heading-text {
-          font-weight: 500;
-        }
-
-        .section-heading-expand {
-          height: 1.25em;
-          transition: transform 150ms cubic-bezier(.4, .2, 0, 1) 50ms;
-          width: 1.25em;
-        }
-
-        .section.expandable.expanded .section-heading-expand {
-          transform: rotate(180deg);
-          transition-delay: 150ms;
-        }
-
-        .section-steps {
-          overflow: hidden;
-        }
-
-        .section-steps li {
-          margin-bottom: 1em;
-          margin-inline-start: 1.25em;
-          padding-inline-start: 1em;
-        }
-
-        .section-steps li:last-child {
-          margin-bottom: 1em;
-        }
-
-        .section.expandable .section-steps {
-          height: var(--expandable-section-height);
-          max-height: 0;
-          opacity: 0;
-          transition: max-height 300ms cubic-bezier(.4, .2, 0, 1) 50ms,
-                      opacity 150ms;
-          visibility: hidden;
-        }
-
-        .section.expandable.expanded .section-steps {
-          max-height: var(--expandable-section-height);
-          opacity: 1;
-          transition: max-height 300ms cubic-bezier(.4, .2, 0, 1) 50ms,
-                      opacity 150ms 250ms;
-          visibility: visible;
-        }
-
-        paper-button {
-          font-size: .8125em;
-        }
-
-        .logo-small {
-          content: url(chrome://welcome-win10/logo-small.png);
-          display: inline;
-          height: 1.25em;
-          vertical-align: top;
-          width: 1.25em;
-        }
-
-        .screenshot {
-          display: block;
-          height: 440px;
-          margin: 0 auto;
-          max-width: 100%;
-          position: relative;
-          top: -96px;
-          width: 720px;
-        }
-
-        .screenshot-image {
-          box-shadow: 0 0 0 1px rgba(0, 0, 0, .12), 0 1px 2px
-                      rgba(0, 0, 0, .24);
-          height: 48vw;
-          margin: 1em 0;
-          max-height: 300px;
-          max-width: 400px;
-          min-height: 150px;
-          min-width: 200px;
-          position: relative;
-          width: 64vw;
-        }
-
-        #default-image {
-          background: url(chrome://welcome-win10/default.webp);
-          background-repeat: no-repeat;
-          background-size: cover;
-        }
-
-        #taskbar-image {
-          background: url(chrome://welcome-win10/pin.webp);
-          background-repeat: no-repeat;
-          background-size: cover;
-        }
-
-        .screenshot-overlay {
-          box-sizing: border-box;
-          line-height: 0;
-          position: absolute;
-          user-select: none;
-        }
-
-        .screenshot-overlay div {
-          cursor: default;
-        }
-
-        #taskbar-overlay {
-          left: 31%;
-          top: 73%;
-        }
-
-        #taskbar-overlay div {
-          color: #ccc;
-          font-family: Tahoma, Verdana, Segoe, sans-serif;
-          font-weight: 500;
-        }
-
-        #switch-anyway-overlay {
-          left: 38%;
-          top: 83%;
-        }
-
-        #switch-anyway-overlay div {
-          color: rgb(0, 117, 218);
-          font-family: Segoe UI;
-        }
-
-        #icon-overlay {
-          background-image: url(chrome://welcome-win10/logo-small.png);
-          background-size: cover;
-          height: 8%;
-          left: 46%;
-          top: 90%;
-          width: 6%;
-        }
-
-        /* These values are precisely set so that the text over the screenshot
-         * starts scaling at the same time the image starts scaling too. */
-        @media (max-width: 626px) {
-          #taskbar-overlay {
-            font-size: 1.95vw;
-          }
-
-          #switch-anyway-overlay {
-            font-size: 1.92vw;
-          }
-        }
-
-        /* Font-sizes used when the screenshot exactly reaches its max size. */
-        @media (min-width: 626px) {
-          #taskbar-overlay {
-            font-size: 12.2px;
-          }
-
-          #switch-anyway-overlay {
-            font-size: 12px;
-          }
-        }
-      </style>
-      <div class="header-logo" role="presentation"></div>
-      <h1>$i18n{headerText}</h1>
-      <div class="sections">
-        <div class$="[[computeClasses(isCombined)]]">
-          <template is="dom-if" if="[[isCombined]]">
-            <div role="heading" aria-level="2">
-              <a id="tab1" is="action-link" class="section-heading"
-                  on-tap="onToggle" role="button" aria-controls="panel1"
-                  aria-expanded="true">
-                <div class="section-heading-text" role="presentation">
-                  $i18n{defaultBrowserSubheaderText}
-                </div>
-                <iron-icon class="section-heading-expand" icon="cr:expand-more"
-                    role="presentation">
-                </iron-icon>
-              </a>
-            </div>
-          </template>
-          <template is="dom-if" if="[[!isCombined]]">
-            <div class="section-heading" role="text">
-              <div class="section-heading-text" role="presentation">
-                $i18n{defaultBrowserSubheaderText}
-              </div>
-            </div>
-          </template>
-          <ol id="panel1" class="section-steps" aria-labelledby="tab1">
-            <li>
-              <a is="action-link" on-tap="onOpenSettings">
-                $i18n{openSettingsText}
-              </a>
-            </li>
-            <template is="dom-if" if="[[!isAccelerated]]">
-              <li>
-                <div role="presentation">$i18nRaw{clickEdgeText}</div>
-              </li>
-            </template>
-            <li>
-              <div role="presentation">$i18nRaw{clickSelectChrome}</div>
-            </li>
-            <li>
-              <div role="presentation">$i18nRaw{clickSwitchAnywayText}</div>
-              <div class="screenshot-image" id="default-image"
-                  role="presentation">
-                <div class="screenshot-overlay" id="switch-anyway-overlay">
-                  <div aria-hidden="true">$i18n{switchAnywayLabel}</div>
-                </div>
-              </div>
-            </li>
-          </ol>
-        </div>
-        <template is="dom-if" if="[[isCombined]]">
-          <div class="section expandable">
-            <div role="heading" aria-level="2">
-              <a id="tab2" is="action-link" class="section-heading"
-                  on-tap="onToggle" role="button" aria-controls="panel2"
-                  aria-expanded="false">
-                <div class="section-heading-text" role="presentation">
-                  $i18n{pinSubheaderText}
-                </div>
-                <iron-icon class="section-heading-expand" icon="cr:expand-more"
-                    role="presentation">
-                </iron-icon>
-              </a>
-            </div>
-            <ol id="panel2" class="section-steps" aria-labelledby="tab2">
-              <li>$i18nRaw{rightClickText}</li>
-              <li>
-                <div role="presentation">$i18nRaw{pinInstructionText}</div>
-                <div class="screenshot-image" id="taskbar-image"
-                    role="presentation">
-                  <div class="screenshot-overlay" id="taskbar-overlay">
-                    <div aria-hidden="true">$i18n{pinToTaskbarLabel}</div>
-                  </div>
-                  <div class="screenshot-overlay" id="icon-overlay">
-                  </div>
-                </div>
-              </li>
-            </ol>
-          </div>
-        </template>
-      </div>
-      <paper-button class="action-button" on-tap="onContinue">
-        $i18n{continueText}
-      </paper-button>
-    </template>
-    <script src="/welcome_win10.js"></script>
-  </dom-module>
-</head>
-<body>
-  <welcome-win10></welcome-win10>
-</body>
-</html>
-- 
2.19.1


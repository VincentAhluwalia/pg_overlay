From 9d4f321d97438715874c5ae2ef04af78e184641f Mon Sep 17 00:00:00 2001
From: Joachim Bauch <jojo@struktur.de>
Date: Mon, 6 Jul 2015 17:17:20 +0200
Subject: [PATCH 43/52] search: show blank tab for new tab page

Avoid loading the search page everytime, just show a blank one instead.

References: https://github.com/iridium-browser/iridium-browser/issues/32
---
 chrome/browser/search/search.cc | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/chrome/browser/search/search.cc b/chrome/browser/search/search.cc
index 2e24e5d..0622117 100644
--- a/chrome/browser/search/search.cc
+++ b/chrome/browser/search/search.cc
@@ -162,6 +162,7 @@ bool IsURLAllowedForSupervisedUser(const GURL& url, Profile* profile) {
   return true;
 }
 
+#if 0
 // Returns whether |new_tab_url| can be used as a URL for the New Tab page.
 // NEW_TAB_URL_VALID means a valid URL; other enum values imply an invalid URL.
 NewTabURLState IsValidNewTabURL(Profile* profile, const GURL& new_tab_url) {
@@ -175,6 +176,7 @@ NewTabURLState IsValidNewTabURL(Profile* profile, const GURL& new_tab_url) {
     return NEW_TAB_URL_BLOCKED;
   return NEW_TAB_URL_VALID;
 }
+#endif
 
 bool ShouldShowLocalNewTab(const GURL& url, Profile* profile) {
 #if defined(OS_CHROMEOS)
@@ -203,6 +205,9 @@ struct NewTabURLDetails {
       : url(url), state(state) {}
 
   static NewTabURLDetails ForProfile(Profile* profile) {
+#if 1
+    return NewTabURLDetails(GURL("about:blank"), NEW_TAB_URL_VALID);
+#else
     const GURL local_url(chrome::kChromeSearchLocalNtpUrl);
 
     base::CommandLine* command_line = base::CommandLine::ForCurrentProcess();
@@ -232,6 +237,7 @@ struct NewTabURLDetails {
         // Use the local New Tab otherwise.
         return NewTabURLDetails(local_url, state);
     }
+#endif
   }
 
   GURL url;
-- 
2.6.6

